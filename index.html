<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Intro to WebSockets</title>
</head>

<body>
<h1>To be filled in later...</h1>

<div id="rulesDiv">
    <p>Welcome to this simple game of ROCK..PAPER...SCISSORS!!!</p>
    <p>Click on the 'Draw' button to begin.</p>
    <p>After the countdown from 3 (that is 3, 2, 1, GO to be clear), click on the button corresponding with your weapon of choice.</p>
    <p>Good luck!</p>
</div>

<div id="buttonDiv">
    <input type="button" value="Draw" id="drawbtn">
</div>

<div id="weaponsDiv">
    <span id="weaponsSpan">
        <input type="button" value="ROCK" id="rockbtn" class="weapons">
        <input type="button" value="PAPER" id="paperbtn" class="weapons">
        <input type="button" value="SCISSORS" id="scissorbtn" class="weapons">
    </span>
</div>

<div id="messageLog"></div>

<!--TODO figure out how to move to index.js and still work: -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>

<script>
    $(function(){
        var socket = io();
        $('.weapons').hide();

        $('#drawbtn').click(function() {
            $('.weapons').fadeIn();
            $('#drawbtn').fadeOut();
            $('#messageLog').empty();
        });

        $('.weapons').click(function(){
            socket.emit('selectedWeapon', $(this).attr('value'));
            $('.weapons').fadeOut();
            $('#drawbtn').fadeIn();
        });

        socket.on('message', function(msgstr) {
            $('#messageLog').append("<div class='msg'>" + msgstr + "</div>");
        });

        socket.on('outcome', function(datastr) {
            console.log(datastr);
            $('#messageLog').append("<div class='msg'>" + datastr + "</div>");
            $('#drawbtn').fadeIn();
        });

        var username = prompt('what is your username?');
        socket.emit('setUsername', username);
    });
</script>
</body>
</html>